# 1. ADF-Concepts-SHIR-and-LinkedService

## 1️⃣ Introduction
In this session, we are working with **Azure Data Factory (ADF)** to move data from on-premise to cloud.  
The main components we are focusing on are:

- **Integration Runtime (IR)**
- **Self-Hosted Integration Runtime (SHIR)**
- **Linked Services (LS)**

We will demonstrate the creation and setup process step by step, using **azuredeveloperABC** as a new developer onboarded to the project.

---

## 2️⃣ Accessing Azure Data Factory
1. Open **Azure Data Factory Studio**.  
2. Navigate to the **Manage** section (the gear icon).  
3. Ensure you are in the correct **branch**.  
   - In this session, **azuredeveloperABC** will create a **personal feature branch** based on the **CS Collaboration Branch**.
   - This is a **best practice** for working on new features or configurations to avoid conflicts with main branches.

---

## 3️⃣ Branch Creation
1. **azuredeveloperABC** creates a new branch:
   - Branch name: `feature-azuredeveloperABC`
   - Base: CS Collaboration Branch
2. Work in this branch to create **SHIR** or **Linked Services**.  
3. Later, submit a **pull request** to merge changes into **CS Collaboration Branch**.

---

## 4️⃣ Integration Runtime (IR) Setup
### 4.1 Why IR is needed
- **Azure Data Factory** is an ETL tool. To move data from **on-prem to cloud**, we need a compute layer.  
- This compute layer can either be **Azure-managed** or **self-hosted**.  
- Without IR, **data cannot move**; it does not “fly” from on-prem to cloud.

### 4.2 Self-Hosted Integration Runtime (SHIR)
- In this session, **azuredeveloperABC's local PC** acts as **on-prem compute**.  
- This is also known as **Self-Hosted Integration Runtime**.
- SHIR allows ADF to securely access **local data sources** like FTP and MySQL.

### 4.3 Azure vs Self-Hosted IR
| Feature               | Azure IR                  | Self-Hosted IR                        |
|-----------------------|---------------------------|--------------------------------------|
| Location              | Managed in Azure Cloud    | Installed on local/on-prem machine   |
| Flexibility           | Limited ports, cloud only | Can open ports to enterprise sources |
| Management            | Fully managed by Azure    | Managed by user                       |

- **Real-time projects mostly use SHIR** because it gives **flexibility to connect to multiple enterprise sources**.

---

## 5️⃣ Creating Self-Hosted Integration Runtime
1. Go to **Integration Runtime** in ADF Studio.  
2. Click **New Integration Runtime** → choose **Self-Hosted**.  
3. Give a name following **naming conventions**:  
   - Example: `IR_FMCG`  
   - It can be small letters, uppercase, or as per project policy.
4. Click **Create**.

### 5.1 Installation Options
- Two options are available for SHIR installation:

#### Option 1: Express Setup
- Automatically installs SHIR on **local PC**.  
- Adds necessary **keys** automatically.  
- **Use case:** When source data is on the **same local machine**.

#### Option 2: Manual Setup
- Generates a **setup file and authentication key**.  
- Copy and install on a **remote machine**.  
- **Use case:** When source data is on a **different on-prem machine** or server.  

> In this session, since both **FTP and MySQL** sources are on **azuredeveloperABC's local PC**, we use **Express Setup**.

---

## 6️⃣ SHIR Installation Process
1. Click **Express Setup**.  
2. Installation will happen automatically on **azuredeveloperABC’s PC**.  
3. Once installed, the local PC is now the **compute engine for ADF**.  
4. SHIR will handle **data transfer from local PC (on-prem) to cloud** securely.  

> Important: SHIR **does not move data on its own**; it provides **compute and network connectivity** for pipelines.

---

## 7️⃣ Key Points About SHIR
- SHIR allows ADF to **connect to any on-premise data source** by opening ports as needed.  
- Azure IR is **limited in flexibility**; cannot connect to private enterprise sources easily.  
- **Local PC or server acts as compute node** to move data.  
- Can install **multiple SHIR nodes** for **load balancing or failover**.

---

## 8️⃣ Linked Service Setup
1. Once SHIR is installed, create **Linked Services** for data sources.  
   - Examples in this session:  
     - FTP location on **local PC**  
     - MySQL database on **local PC**
2. Linked Service stores **connection info, credentials, and authentication details**.  
3. **Linked Service is like the vehicle** transporting data using the SHIR (compute bridge).  

---

## 9️⃣ Workflow Recap
1. **azuredeveloperABC** creates personal branch: `feature-azuredeveloperABC`  
2. Opens ADF Studio → Navigate to **Manage → Integration Runtime**  
3. Click **New IR → Self-Hosted → Name**  
4. Choose **Express Setup → Install SHIR on local PC**  
5. Create **Linked Services** for FTP and MySQL  
6. SHIR now acts as **compute** to move data from **on-prem (local PC) → cloud**  
7. Later, create **pull request** to merge branch into **CS Collaboration Branch**  

---

## 10️⃣ Notes & Best Practices
- Always **work in your personal branch** for new features/configs.  
- Follow **naming conventions** for IR and Linked Services.  
- Use **Self-Hosted IR** for enterprise data sources.  
- Choose **Azure IR** only for cloud-to-cloud data movement.  
- **Manual SHIR setup** is needed only for remote machines.  
- SHIR handles compute; **Linked Services** handle connection; **Datasets** handle data structure.  

---

## 11️⃣ Example Analogy
| Component                     | Analogy                                      |
|-------------------------------|---------------------------------------------|
| SHIR (Self-Hosted Integration Runtime) | Local PC acting as compute engine / bridge |
| Linked Service                 | Vehicle carrying data                        |
| Dataset                        | Container / bag holding data                 |
| Pipeline / Copy Activity       | Driver moving container across bridge       |
